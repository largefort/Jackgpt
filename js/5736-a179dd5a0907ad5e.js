"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5736],{94820:function(e,t,n){n.d(t,{a:function(){return h}});var r=n(57437),s=n(2265),l=n(20251),a=n(56091),i=n(16414),o=n(90924),d=n(29580),c=n(84599),u=n(76928),m=n(34775),p=n(23789),x=n(83159),g=n(75436);function h(e,t,n){return e.replace(/\{\{([^}]+)\}\}/g,(e,r)=>{let s=n[r];if(s)return s;let l=t.find(e=>e.key===r);return l?"{{".concat(l.name,"}}"):e})}t.Z=s.memo(e=>{let{appType:t,onSend:n,inputs:h,visionConfig:v,onVisionFilesChange:f}=e,{t:j}=(0,l.$G)(),{modelModeType:b,modelConfig:y,setInputs:w,mode:C,isAdvancedMode:N,completionPromptConfig:k,chatPromptConfig:_}=(0,a.qp)(o.Z),[F,L]=(0,s.useState)(!1),Z=y.configs.prompt_variables.filter(e=>{let{key:t,name:n}=e;return t&&(null==t?void 0:t.trim())&&n&&(null==n?void 0:n.trim())}),I=(()=>{let e={};return Z.forEach(t=>{e[t.key]=!0}),e})(),E=C!==d.pR.completion||(N?b===d.wc.chat?_.prompt.every(e=>{let{text:t}=e;return!t}):!k.prompt.text:!y.configs.prompt_template),R=()=>(0,r.jsxs)(m.Z,{type:"primary",disabled:E,onClick:()=>n&&n(),className:"w-[80px] !h-8",children:[(0,r.jsx)(i.Z,{className:"shrink-0 w-4 h-4 mr-1","aria-hidden":"true"}),(0,r.jsx)("span",{className:"uppercase text-[13px]",children:j("appDebug.inputs.run")})]}),D=(e,t)=>{if(!(e in I))return;let n={...h};Z.forEach(r=>{r.key===e&&(n[e]=t)}),w(n)};return(0,r.jsxs)("div",{className:"pb-3 border border-gray-200 bg-white rounded-xl",style:{boxShadow:"0px 4px 8px -2px rgba(16, 24, 40, 0.1), 0px 2px 4px -2px rgba(16, 24, 40, 0.06)"},children:[(0,r.jsxs)("div",{className:"mt-3 px-4 bg-white",children:[(0,r.jsxs)("div",{className:"".concat(!F&&"mb-2"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1 cursor-pointer",onClick:()=>L(!F),children:[F?(0,r.jsx)(p._Q,{className:"w-3 h-3 text-gray-300"}):(0,r.jsx)(p._M,{className:"w-3 h-3 text-gray-300"}),(0,r.jsx)("div",{className:"text-xs font-medium text-gray-800 uppercase",children:j("appDebug.inputs.userInputField")})]}),t===d.pR.completion&&Z.length>0&&!F&&(0,r.jsx)("div",{className:"mt-1 text-xs leading-normal text-gray-500",children:j("appDebug.inputs.completionVarTip")})]}),!F&&(0,r.jsxs)(r.Fragment,{children:[Z.length>0?(0,r.jsx)("div",{className:"space-y-3 ",children:Z.map(e=>{let{key:t,name:n,type:s,options:l,max_length:a,required:i}=e;return(0,r.jsxs)("div",{className:"xl:flex justify-between",children:[(0,r.jsx)("div",{className:"mr-1 py-2 shrink-0 w-[120px] text-sm text-gray-900",children:n||t}),"select"===s&&(0,r.jsx)(c.ZP,{className:"w-full",defaultValue:h[t],onSelect:e=>{D(t,e.value)},items:(l||[]).map(e=>({name:e,value:e})),allowSearch:!1,bgClassName:"bg-gray-50"}),"string"===s&&(0,r.jsx)("input",{className:"w-full px-3 text-sm leading-9 text-gray-900 border-0 rounded-lg grow h-9 bg-gray-50 focus:outline-none focus:ring-1 focus:ring-inset focus:ring-gray-200",placeholder:"".concat(n).concat(i?"":"(".concat(j("appDebug.variableTable.optional"),")")),type:"text",value:h[t]?"".concat(h[t]):"",onChange:e=>{D(t,e.target.value)},maxLength:a||u.VM}),"paragraph"===s&&(0,r.jsx)("textarea",{className:"w-full px-3 text-sm leading-9 text-gray-900 border-0 rounded-lg grow h-[120px] bg-gray-50 focus:outline-none focus:ring-1 focus:ring-inset focus:ring-gray-200",placeholder:"".concat(n).concat(i?"":"(".concat(j("appDebug.variableTable.optional"),")")),value:h[t]?"".concat(h[t]):"",onChange:e=>{D(t,e.target.value)}})]},t)})}):(0,r.jsx)("div",{className:"text-xs text-gray-500",children:j("appDebug.inputs.noVar")}),t===d.pR.completion&&(null==v?void 0:v.enabled)&&(0,r.jsxs)("div",{className:"mt-3 xl:flex justify-between",children:[(0,r.jsx)("div",{className:"mr-1 py-2 shrink-0 w-[120px] text-sm text-gray-900",children:j("common.imageUploader.imageUpload")}),(0,r.jsx)("div",{className:"grow",children:(0,r.jsx)(g.Z,{settings:v,onFilesChange:e=>f(e.filter(e=>-1!==e.progress).map(e=>({type:"image",transfer_method:e.type,url:e.url,upload_file_id:e.fileId})))})})]})]})]}),t===d.pR.completion&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mt-5 border-b border-gray-100"}),(0,r.jsxs)("div",{className:"flex justify-between mt-4 px-4",children:[(0,r.jsx)(m.Z,{className:"!h-8 !p-3",onClick:()=>{let e={};Z.forEach(t=>{e[t.key]=""}),w(e)},disabled:!1,children:(0,r.jsx)("span",{className:"text-[13px]",children:j("common.operation.clear")})}),E?(0,r.jsx)(x.Z,{popupContent:j("appDebug.otherError.promptNoBeEmpty"),children:R()}):R()]})]})]})})},67494:function(e,t,n){var r=n(57437),s=n(2265),l=n(56091),a=n(34222),i=n.n(a),o=n(20251),d=n(6616),c=n(91890),u=n(83159),m=n(52181),p=n(41123),x=n(51220),g=n(61811),h=n(33211),v=n(28315),f=n(72493),j=n(34731),b=n(60103),y=n(25085);t.Z=(0,s.memo)(e=>{let{visionConfig:t,speechToTextConfig:n,onSend:a}=e,{t:w}=(0,o.$G)(),{notify:C}=(0,l.qp)(m.ToastContext),[N,k]=(0,s.useState)(!1),{files:_,onUpload:F,onRemove:L,onReUpload:Z,onImageLinkLoadError:I,onImageLinkLoadSuccess:E,onClear:R}=(0,y.Vo)(),{onPaste:D}=(0,y.IV)({onUpload:F,visionConfig:t,files:_}),{onDragEnter:A,onDragLeave:S,onDragOver:V,onDrop:q,isDragActive:U}=(0,y.kW)({onUpload:F,files:_,visionConfig:t}),T=(0,s.useRef)(!1),[M,H]=(0,s.useState)(""),$=()=>{if(a){if(_.find(e=>e.type===c.I.local_file&&!e.fileId)){C({type:"info",message:w("appDebug.errorMessage.waitForImgUpload")});return}if(!M||!M.trim()){C({type:"info",message:w("appAnnotation.errorMessage.queryRequired")});return}a(M,_.filter(e=>-1!==e.progress).map(e=>({type:"image",transfer_method:e.type,url:e.url,upload_file_id:e.fileId}))),H(""),R()}},B=e=>{C({type:"error",message:e,duration:3e3})},G=(0,p.Z)()===p.D.mobile,z=(0,r.jsx)("div",{className:"group flex items-center justify-center w-8 h-8 rounded-lg hover:bg-[#EBF5FF] cursor-pointer",onClick:$,children:(0,r.jsx)(f.ae,{className:"\n          w-5 h-5 text-gray-300 group-hover:text-primary-600\n          ".concat(!!M.trim()&&"text-primary-600","\n        ")})});return(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("div",{className:"\n          p-[5.5px] max-h-[150px] bg-white border-[1.5px] border-gray-200 rounded-xl overflow-y-auto\n          ".concat(U&&"border-primary-600","\n        "),children:[(null==t?void 0:t.enabled)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"absolute bottom-2 left-2 flex items-center",children:[(0,r.jsx)(j.Z,{settings:t,onUpload:F,disabled:_.length>=t.number_limits}),(0,r.jsx)("div",{className:"mx-1 w-[1px] h-4 bg-black/5"})]}),(0,r.jsx)("div",{className:"pl-[52px]",children:(0,r.jsx)(b.Z,{list:_,onRemove:L,onReUpload:Z,onImageLinkLoadSuccess:E,onImageLinkLoadError:I})})]}),(0,r.jsx)(d.Z,{className:"\n            block w-full px-2 pr-[118px] py-[7px] leading-5 max-h-none text-sm text-gray-700 outline-none appearance-none resize-none\n            ".concat((null==t?void 0:t.enabled)&&"pl-12","\n          "),value:M,onChange:e=>{H(e.target.value)},onKeyUp:e=>{"Enter"!==e.code||(e.preventDefault(),e.shiftKey||T.current||$())},onKeyDown:e=>{T.current=e.nativeEvent.isComposing,"Enter"!==e.code||e.shiftKey||(H(M.replace(/\n$/,"")),e.preventDefault())},onPaste:D,onDragEnter:A,onDragLeave:S,onDragOver:V,onDrop:q,autoSize:!0}),(0,r.jsxs)("div",{className:"absolute bottom-[7px] right-2 flex items-center h-8",children:[(0,r.jsx)("div",{className:"flex items-center px-1 h-5 rounded-md bg-gray-100 text-xs font-medium text-gray-500",children:M.trim().length}),M?(0,r.jsx)("div",{className:"flex justify-center items-center ml-2 w-8 h-8 cursor-pointer hover:bg-gray-100 rounded-lg",onClick:()=>H(""),children:(0,r.jsx)(v.a2,{className:"w-4 h-4 text-[#98A2B3]"})}):(null==n?void 0:n.enabled)?(0,r.jsxs)("div",{className:"group flex justify-center items-center ml-2 w-8 h-8 hover:bg-primary-50 rounded-lg cursor-pointer",onClick:()=>{i().getPermission().then(()=>{k(!0)},()=>{B(w("common.voiceInput.notAllow"))})},children:[(0,r.jsx)(g.$e,{className:"block w-4 h-4 text-gray-500 group-hover:hidden"}),(0,r.jsx)(h.$e,{className:"hidden w-4 h-4 text-primary-600 group-hover:block"})]}):null,(0,r.jsx)("div",{className:"mx-2 w-[1px] h-4 bg-black opacity-5"}),G?z:(0,r.jsx)(u.Z,{popupContent:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[w("common.operation.send")," Enter"]}),(0,r.jsxs)("div",{children:[w("common.operation.lineBreak")," Shift Enter"]})]}),children:z})]}),N&&(0,r.jsx)(x.Z,{onCancel:()=>k(!1),onConverted:e=>H(e)})]})})})},18730:function(e,t,n){n.d(t,{R:function(){return p}});var r=n(2265),s=n(20251),l=n(10947),a=n(74548),i=n.n(a),o=n(29580),d=n(52181),c=n(79195),u=n(94820);let m=()=>{let{t:e}=(0,s.$G)(),{notify:t}=(0,d.useToastContext)();return(0,r.useCallback)(n=>{let{promptVariables:r,inputs:s}=n,l="",a=r.filter(e=>{let{key:t,name:n,required:r,type:s}=e;return("string"===s||"paragraph"===s||"select"===s)&&(!t||!t.trim()||!n||!n.trim()||r||null==r)});if((null==a?void 0:a.length)&&a.forEach(e=>{let{key:t,name:n}=e;l||s[t]||(l=n)}),l)return t({type:"error",message:e("appDebug.errorMessage.valueOfVarRequired",{key:l})}),!1},[t,e])},p=(e,t,n,a)=>{let{t:p}=(0,s.$G)(),{notify:x}=(0,d.useToastContext)(),g=(0,r.useRef)(""),h=(0,r.useRef)(!1),[v,f]=(0,r.useState)(!1),j=(0,r.useRef)(!1),[b,y]=(0,r.useState)(n||[]),w=(0,r.useRef)(n||[]),C=(0,r.useRef)(""),[N,k]=(0,r.useState)([]),_=(0,r.useRef)(null),F=(0,r.useRef)(null),L=m();(0,r.useEffect)(()=>((0,l.Fl)(!1),()=>{(0,l.Fl)(!0)}),[]);let Z=(0,r.useCallback)(e=>{y(e),w.current=e},[]),I=(0,r.useCallback)(e=>{f(e),j.current=e},[]),E=(0,r.useCallback)(e=>(0,u.a)(e,(null==t?void 0:t.promptVariables)||[],(null==t?void 0:t.inputs)||{}),[null==t?void 0:t.inputs,null==t?void 0:t.promptVariables]);(0,r.useEffect)(()=>{(null==e?void 0:e.opening_statement)&&Z((0,l.Uy)(w.current,t=>{let n=t.findIndex(e=>e.isOpeningStatement);n>-1?t[n]={...t[n],content:E(e.opening_statement),suggestedQuestions:e.suggested_questions}:t.unshift({id:"".concat(Date.now()),content:E(e.opening_statement),isAnswer:!0,isOpeningStatement:!0,suggestedQuestions:e.suggested_questions})}))},[null==e?void 0:e.opening_statement,E,null==e?void 0:e.suggested_questions,Z]);let R=(0,r.useCallback)(()=>{h.current=!0,I(!1),a&&C.current&&a(C.current),_.current&&_.current.abort(),F.current&&F.current.abort()},[a,I]),D=(0,r.useCallback)(()=>{g.current="",C.current="",R(),Z((null==e?void 0:e.opening_statement)?[{id:"".concat(Date.now()),content:e.opening_statement,isAnswer:!0,isOpeningStatement:!0,suggestedQuestions:e.suggested_questions}]:[]),k([])},[e,R,Z]),A=(0,r.useCallback)(e=>{let{responseItem:t,questionId:n,placeholderAnswerId:r,questionItem:s}=e;Z((0,l.Uy)(w.current.filter(e=>e.id!==t.id&&e.id!==r),e=>{e.find(e=>e.id===n)||e.push({...s}),e.push({...t})}))},[Z]),S=(0,r.useCallback)(async(n,r,s)=>{var a;let{onGetConvesationMessages:d,onGetSuggestedQuestions:u,onConversationComplete:m,isPublicAPI:v}=s;if(k([]),j.current)return x({type:"info",message:p("appDebug.errorMessage.waitForResponse")}),!1;(null==t?void 0:t.inputs)&&(null==t?void 0:t.promptVariables)&&L(t);let f="question-".concat(Date.now()),b={id:f,content:r.query,isAnswer:!1,message_files:r.files},y="answer-placeholder-".concat(Date.now());Z([...w.current,b,{id:y,content:"",isAnswer:!0}]);let N={id:"".concat(Date.now()),content:"",agent_thoughts:[],message_files:[],isAnswer:!0};I(!0),h.current=!1;let E={response_mode:"streaming",conversation_id:g.current,...r};(null==E?void 0:null===(a=E.files)||void 0===a?void 0:a.length)&&(E.files=E.files.map(e=>e.transfer_method===o.IY.local_file?{...e,url:""}:e));let R=!1,D=!1;return(0,c.dg)(n,{body:E},{isPublicAPI:v,onData:(e,t,n)=>{let{conversationId:r,messageId:s,taskId:l}=n;if(R){var a,i;let t=null===(i=N.agent_thoughts)||void 0===i?void 0:i[(null===(a=N.agent_thoughts)||void 0===a?void 0:a.length)-1];t&&(t.thought=t.thought+e)}else N.content=N.content+e;s&&!D&&(N.id=s,D=!0),t&&r&&(g.current=r),C.current=l,s&&(N.id=s),A({responseItem:N,questionId:f,placeholderAnswerId:y,questionItem:b})},async onCompleted(t){var n;if(I(!1),!t){if(m&&m(g.current),g.current&&!h.current&&d){let{data:e}=await d(g.current,e=>_.current=e),t=e.find(e=>e.id===N.id);if(!t)return;Z((0,l.Uy)(w.current,e=>{let n=e.findIndex(e=>e.id===N.id);if(-1!==n){let r=e[n-1];e[n-1]={...r,log:t.message},e[n]={...e[n],more:{time:i().unix(t.created_at).format("hh:mm A"),tokens:t.answer_tokens+t.message_tokens,latency:t.provider_response_latency.toFixed(2)}}}}))}if((null==e?void 0:null===(n=e.suggested_questions_after_answer)||void 0===n?void 0:n.enabled)&&!h.current&&u){let{data:e}=await u(N.id,e=>F.current=e);k(e)}}},onFile(e){var t,n;let r=null===(n=N.agent_thoughts)||void 0===n?void 0:n[(null===(t=N.agent_thoughts)||void 0===t?void 0:t.length)-1];r&&(N.agent_thoughts[N.agent_thoughts.length-1].message_files=[...r.message_files,e]),A({responseItem:N,questionId:f,placeholderAnswerId:y,questionItem:b})},onThought(e){if(R=!0,e.message_id&&!D&&(N.id=e.message_id),0===N.agent_thoughts.length)N.agent_thoughts.push(e);else{let t=N.agent_thoughts[N.agent_thoughts.length-1];t.id===e.id?(e.thought=t.thought,e.message_files=t.message_files,N.agent_thoughts[N.agent_thoughts.length-1]=e):N.agent_thoughts.push(e)}A({responseItem:N,questionId:f,placeholderAnswerId:y,questionItem:b})},onMessageEnd:e=>{var t,n;if(null===(t=e.metadata)||void 0===t?void 0:t.annotation_reply){N.id=e.id,N.annotation={id:e.metadata.annotation_reply.id,authorName:e.metadata.annotation_reply.account.name};let t=w.current.filter(e=>e.id!==N.id&&e.id!==y);Z((0,l.Uy)(t,e=>{e.find(e=>e.id===f)||e.push({...b}),e.push({...N})}));return}N.citation=(null===(n=e.metadata)||void 0===n?void 0:n.retriever_resources)||[],Z((0,l.Uy)(w.current.filter(e=>e.id!==N.id&&e.id!==y),e=>{e.find(e=>e.id===f)||e.push({...b}),e.push({...N})}))},onMessageReplace:e=>{N.content=e.answer},onError(){I(!1),Z((0,l.Uy)(w.current,e=>{e.splice(e.findIndex(e=>e.id===y),1)}))}}),!0},[L,null==e?void 0:e.suggested_questions_after_answer,A,p,x,t,Z,I]),V=(0,r.useCallback)((e,t,n)=>{Z(w.current.map((r,s)=>s===n-1?{...r,content:e}:s===n?{...r,content:t,annotation:{...r.annotation,logAnnotation:void 0}}:r))},[Z]),q=(0,r.useCallback)((e,t,n,r,s)=>{Z(w.current.map((l,a)=>a===s-1?{...l,content:n}:a===s?{...l,content:l.content,annotation:{id:e,authorName:t,logAnnotation:{content:r,account:{id:"",name:t,email:""}}}}:l))},[Z]),U=(0,r.useCallback)(e=>{Z(w.current.map((t,n)=>n===e?{...t,content:t.content,annotation:{...t.annotation||{},id:""}}:t))},[Z]);return{chatList:b,setChatList:y,conversationId:g.current,isResponding:v,setIsResponding:f,handleSend:S,suggestedQuestions:N,handleRestart:D,handleStop:R,handleAnnotationEdited:V,handleAnnotationAdded:q,handleAnnotationRemoved:U}}},319:function(e,t,n){n.d(t,{Z:function(){return M}});var r=n(57437),s=n(2265),l=n(20251),a=n(44782),i=n(28315),o=n(73591),d=n(78702),c=n(16715),u=n(3884),m=(0,s.memo)(e=>{let{item:t,showPromptLog:n,isResponding:l,questionIcon:a}=e,m=(0,s.useRef)(null),{content:p,message_files:x}=t,g=(null==x?void 0:x.length)?x.map(e=>e.url):[];return(0,r.jsxs)("div",{className:"flex justify-end mb-2 last:mb-0 pl-10",ref:m,children:[(0,r.jsxs)("div",{className:"group relative mr-4",children:[(0,r.jsx)(i.aD,{className:"absolute -right-2 top-0 w-2 h-3 text-[#D1E9FF]/50"}),n&&!l&&(0,r.jsx)(d.Z,{log:t.log,containerRef:m}),(0,r.jsxs)("div",{className:"px-4 py-3 bg-[#D1E9FF]/50 rounded-b-2xl rounded-tl-2xl text-sm text-gray-900",children:[!!g.length&&(0,r.jsx)(u.Z,{srcs:g}),(0,r.jsx)(c.U,{content:p})]}),(0,r.jsx)("div",{className:"mt-1 h-[18px]"})]}),(0,r.jsx)("div",{className:"shrink-0 w-10 h-10",children:a||(0,r.jsx)("div",{className:"w-full h-full rounded-full border-[0.5px] border-black/5",children:(0,r.jsx)(o.n,{className:"w-full h-full"})})})]})}),p=n(56091);let x=(0,p.kr)({chatList:[]}),g=e=>{let{children:t,config:n,isResponding:s,chatList:l,showPromptLog:a,questionIcon:i,answerIcon:o,allToolIcons:d,onSend:c,onAnnotationEdited:u,onAnnotationAdded:m,onAnnotationRemoved:p,onFeedback:g}=e;return(0,r.jsx)(x.Provider,{value:{config:n,isResponding:s,chatList:l||[],showPromptLog:a,questionIcon:i,answerIcon:o,allToolIcons:d,onSend:c,onAnnotationEdited:u,onAnnotationAdded:m,onAnnotationRemoved:p,onFeedback:g},children:t})},h=()=>(0,p.qp)(x);var v=n(3794),f=n(72493),j=n(71334),b=n(50297),y=n(96315),w=n(58443),C=n(83159),N=(0,s.memo)(e=>{var t,n,a;let{item:i,question:o,index:d}=e,{t:c}=(0,l.$G)(),{config:u,onAnnotationAdded:m,onAnnotationEdited:p,onAnnotationRemoved:x,onFeedback:g}=h(),[N,k]=(0,s.useState)(!1),{id:_,isOpeningStatement:F,content:L,annotation:Z,feedback:I,agent_thoughts:E}=i,R=!!(null==Z?void 0:Z.id),[D,A]=(0,s.useState)(I),S=(0,s.useMemo)(()=>(null==E?void 0:E.length)?E.reduce((e,t)=>e+t.thought,""):L,[E,L]),V=async e=>{(null==u?void 0:u.supportFeedback)&&g&&(await (null==g?void 0:g(_,{rating:e})),A({rating:e}))};return(0,r.jsxs)("div",{className:"absolute top-[-14px] right-[-14px] flex justify-end gap-1",children:[!F&&(0,r.jsx)(v.Z,{value:S,className:"hidden group-hover:block"}),!F&&(null==u?void 0:null===(t=u.text_to_speech)||void 0===t?void 0:t.enabled)&&(0,r.jsx)(j.Z,{value:S,voice:null==u?void 0:null===(n=u.text_to_speech)||void 0===n?void 0:n.voice,className:"hidden group-hover:block"}),!F&&(null==u?void 0:u.supportAnnotation)&&(null===(a=u.annotation_reply)||void 0===a?void 0:a.enabled)&&(0,r.jsx)(b.Z,{appId:(null==u?void 0:u.appId)||"",messageId:_,annotationId:(null==Z?void 0:Z.id)||"",className:"hidden group-hover:block ml-1 shrink-0",cached:R,query:o,answer:S,onAdded:(e,t)=>null==m?void 0:m(e,t,o,S,d),onEdit:()=>k(!0),onRemoved:()=>null==x?void 0:x(d)}),(0,r.jsx)(y.Z,{isShow:N,onHide:()=>k(!1),query:o,answer:S,onEdited:(e,t)=>null==p?void 0:p(e,t,d),onAdded:(e,t,n,r)=>null==m?void 0:m(e,t,n,r,d),appId:(null==u?void 0:u.appId)||"",messageId:_,annotationId:(null==Z?void 0:Z.id)||"",createdAt:null==Z?void 0:Z.created_at,onRemove:()=>null==x?void 0:x(d)}),(null==Z?void 0:Z.id)&&(0,r.jsx)("div",{className:"relative box-border flex items-center justify-center h-7 w-7 p-0.5 rounded-lg bg-white cursor-pointer text-[#444CE7] shadow-md",children:(0,r.jsx)("div",{className:"p-1 rounded-lg bg-[#EEF4FF] ",children:(0,r.jsx)(f.$l,{className:"w-4 h-4"})})}),(null==u?void 0:u.supportFeedback)&&!(null==D?void 0:D.rating)&&g&&!F&&(0,r.jsxs)("div",{className:"hidden group-hover:flex ml-1 shrink-0 items-center px-0.5 bg-white border-[0.5px] border-gray-100 shadow-md text-gray-500 rounded-lg",children:[(0,r.jsx)(C.Z,{popupContent:c("appDebug.operation.agree"),children:(0,r.jsx)("div",{className:"flex items-center justify-center mr-0.5 w-6 h-6 rounded-md hover:bg-black/5 hover:text-gray-800 cursor-pointer",onClick:()=>V("like"),children:(0,r.jsx)(w.Vw,{className:"w-4 h-4"})})}),(0,r.jsx)(C.Z,{popupContent:c("appDebug.operation.disagree"),children:(0,r.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-md hover:bg-black/5 hover:text-gray-800 cursor-pointer",onClick:()=>V("dislike"),children:(0,r.jsx)(w.LX,{className:"w-4 h-4"})})})]}),(null==u?void 0:u.supportFeedback)&&(null==D?void 0:D.rating)&&g&&!F&&(0,r.jsx)(C.Z,{popupContent:c("like"===D.rating?"appDebug.operation.cancelAgree":"appDebug.operation.cancelDisagree"),children:(0,r.jsxs)("div",{className:"\n                flex items-center justify-center w-7 h-7 rounded-[10px] border-[2px] border-white cursor-pointer\n                ".concat("like"===D.rating&&"bg-blue-50 text-blue-600","\n                ").concat("dislike"===D.rating&&"bg-red-100 text-red-600","\n              "),onClick:()=>V(null),children:["like"===D.rating&&(0,r.jsx)(w.Vw,{className:"w-4 h-4"}),"dislike"===D.rating&&(0,r.jsx)(w.LX,{className:"w-4 h-4"})]})})]})}),k=n(58583),_=(0,s.memo)(e=>{let{item:t,responding:n,allToolIcons:s}=e,{annotation:l,agent_thoughts:a}=t,i=e=>e?e.filter(e=>"image"===e.type&&"assistant"===e.belongs_to):[];return(null==l?void 0:l.logAnnotation)?(0,r.jsx)(c.U,{content:(null==l?void 0:l.logAnnotation.content)||""}):(0,r.jsx)("div",{children:null==a?void 0:a.map((e,t)=>(0,r.jsxs)("div",{children:[e.thought&&(0,r.jsx)(c.U,{content:e.thought}),!!e.tool&&(0,r.jsx)(k.Z,{thought:e,allToolIcons:s||{},isFinished:!!e.observation||!n}),i(e.message_files).length>0&&(0,r.jsx)(u.Z,{srcs:i(e.message_files).map(e=>e.url)})]},t))})}),F=(0,s.memo)(e=>{let{item:t}=e,{annotation:n,content:s}=t;return(null==n?void 0:n.logAnnotation)?(0,r.jsx)(c.U,{content:(null==n?void 0:n.logAnnotation.content)||""}):(0,r.jsx)(c.U,{content:s})}),L=(0,s.memo)(e=>{let{item:t}=e,{onSend:n}=h(),{isOpeningStatement:s,suggestedQuestions:l}=t;return s&&(null==l?void 0:l.length)?(0,r.jsx)("div",{className:"flex flex-wrap",children:l.filter(e=>!!e&&e.trim()).map((e,t)=>(0,r.jsx)("div",{className:"mt-1 mr-1 max-w-full last:mr-0 shrink-0 py-[5px] leading-[18px] items-center px-4 rounded-lg border border-gray-200 shadow-xs bg-white text-xs font-medium text-primary-600 cursor-pointer",onClick:()=>null==n?void 0:n(e),children:e},t))}):null}),Z=n(35195),I=(0,s.memo)(e=>{let{more:t}=e,{t:n}=(0,l.$G)();return(0,r.jsx)("div",{className:"flex items-center mt-1 h-[18px] text-xs text-gray-400 opacity-0 group-hover:opacity-100",children:t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mr-2 shrink-0 truncate max-w-[33.3%]",title:"".concat(n("appLog.detail.timeConsuming")," ").concat(t.latency).concat(n("appLog.detail.second")),children:"".concat(n("appLog.detail.timeConsuming")," ").concat(t.latency).concat(n("appLog.detail.second"))}),(0,r.jsx)("div",{className:"shrink-0 truncate max-w-[33.3%]",title:"".concat(n("appLog.detail.tokenCost")," ").concat((0,Z.uf)(t.tokens)),children:"".concat(n("appLog.detail.tokenCost")," ").concat((0,Z.uf)(t.tokens))}),(0,r.jsx)("div",{className:"shrink-0 mx-2",children:"\xb7"}),(0,r.jsx)("div",{className:"shrink-0 truncate max-w-[33.3%]",title:t.time,children:t.time})]})})}),E=n(13193),R=n(9909),D=n(23232),A=(0,s.memo)(e=>{var t;let{item:n,question:s,index:a,config:o,answerIcon:d,responding:c,allToolIcons:u}=e,{t:m}=(0,l.$G)(),{content:p,citation:x,agent_thoughts:g,more:h,annotation:v}=n,f=!!(null==g?void 0:g.length);return(0,r.jsxs)("div",{className:"flex mb-2 last:mb-0",children:[(0,r.jsxs)("div",{className:"shrink-0 relative w-10 h-10",children:[d||(0,r.jsx)("div",{className:"flex items-center justify-center w-full h-full rounded-full bg-[#d5f5f6] border-[0.5px] border-black/5 text-xl",children:"\uD83E\uDD16"}),c&&(0,r.jsx)("div",{className:"absolute -top-[3px] -left-[3px] pl-[6px] flex items-center w-4 h-4 bg-white rounded-full shadow-xs border-[0.5px] border-gray-50",children:(0,r.jsx)(E.Z,{type:"avatar"})})]}),(0,r.jsxs)("div",{className:"chat-answer-container grow w-0 group ml-4",children:[(0,r.jsxs)("div",{className:"relative pr-10",children:[(0,r.jsx)(i.c6,{className:"absolute -left-2 top-0 w-2 h-3 text-gray-100"}),(0,r.jsxs)("div",{className:"group relative inline-block px-4 py-3 max-w-full bg-gray-100 rounded-b-2xl rounded-tr-2xl text-sm text-gray-900",children:[!c&&(0,r.jsx)(N,{item:n,question:s,index:a}),c&&!p&&!f&&(0,r.jsx)("div",{className:"flex items-center justify-center w-6 h-5",children:(0,r.jsx)(E.Z,{type:"text"})}),p&&!f&&(0,r.jsx)(F,{item:n}),f&&(0,r.jsx)(_,{item:n,responding:c,allToolIcons:u}),(null==v?void 0:v.id)&&v.authorName&&(0,r.jsx)(D.$w,{className:"mt-1",title:m("appAnnotation.editBy",{author:v.authorName})}),(0,r.jsx)(L,{item:n}),!!(null==x?void 0:x.length)&&(null==o?void 0:null===(t=o.retriever_resource)||void 0===t?void 0:t.enabled)&&!c&&(0,r.jsx)(R.Z,{data:x,showHitInfo:o.supportCitationHitInfo})]})]}),(0,r.jsx)(I,{more:h})]})]})}),S=n(67494),V=n(39032),q=n(34775),U=(0,s.memo)(e=>{let{suggestedQuestions:t,onSend:n}=e,{t:s}=(0,l.$G)();return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-2.5 py-2",children:[(0,r.jsx)("div",{className:"grow h-[1px]",style:{background:"linear-gradient(270deg, #F3F4F6 0%, rgba(243, 244, 246, 0) 100%)"}}),(0,r.jsxs)("div",{className:"shrink-0 flex items-center px-3 text-gray-500",children:[(0,r.jsx)(V._,{className:"mr-1 w-2.5 h-2.5"}),(0,r.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:s("appDebug.feature.suggestedQuestionsAfterAnswer.tryToAsk")})]}),(0,r.jsx)("div",{className:"grow h-[1px]",style:{background:"linear-gradient(270deg, rgba(243, 244, 246, 0) 0%, #F3F4F6 100%)"}})]}),(0,r.jsx)("div",{className:"flex flex-wrap justify-center",children:t.map((e,t)=>(0,r.jsx)(q.Z,{className:"mb-2 mr-2 last:mr-0 px-3 py-[5px] bg-white text-primary-600 text-xs font-medium",onClick:()=>n(e),children:e},t))})]})}),T=n(33211),M=(0,s.memo)(e=>{var t,n;let{config:i,onSend:o,chatList:d,isResponding:c,noStopResponding:u,onStopResponding:p,noChatInput:x,chatContainerclassName:h,chatContainerInnerClassName:v,chatFooterClassName:f,chatFooterInnerClassName:j,suggestedQuestions:b,showPromptLog:y,questionIcon:w,answerIcon:C,allToolIcons:N,onAnnotationAdded:k,onAnnotationEdited:_,onAnnotationRemoved:F,chatNode:L,onFeedback:Z}=e,{t:I}=(0,l.$G)(),E=(0,s.useRef)(null),R=(0,s.useRef)(null),D=(0,s.useRef)(null),V=(0,s.useRef)(null),M=(0,s.useRef)(!1),H=(0,s.useCallback)(()=>{E.current&&!M.current&&(E.current.scrollTop=E.current.scrollHeight)},[]),$=(0,s.useCallback)(()=>{E.current&&D.current&&(D.current.style.width="".concat(E.current.clientWidth,"px")),R.current&&V.current&&(V.current.style.width="".concat(R.current.clientWidth,"px"))},[]);(0,s.useEffect)(()=>{H(),$()},[H,$]),(0,s.useEffect)(()=>{E.current&&requestAnimationFrame(()=>{H(),$()})}),(0,s.useEffect)(()=>(window.addEventListener("resize",(0,a.Z)($)),()=>window.removeEventListener("resize",$)),[$]),(0,s.useEffect)(()=>{if(D.current&&E.current){let e=new ResizeObserver(e=>{for(let t of e){let{blockSize:e}=t.borderBoxSize[0];E.current.style.paddingBottom="".concat(e,"px"),H()}});return e.observe(D.current),()=>{e.disconnect()}}},[H]),(0,s.useEffect)(()=>{let e=E.current;if(e){let t=()=>{e&&(M.current=e.scrollHeight-e.scrollTop>=e.clientHeight+300)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[]);let B=(null==i?void 0:null===(t=i.suggested_questions_after_answer)||void 0===t?void 0:t.enabled)&&!!(null==b?void 0:b.length)&&o;return(0,r.jsx)(g,{config:i,chatList:d,isResponding:c,showPromptLog:y,questionIcon:w,answerIcon:C,allToolIcons:N,onSend:o,onAnnotationAdded:k,onAnnotationEdited:_,onAnnotationRemoved:F,onFeedback:Z,children:(0,r.jsxs)("div",{className:"relative h-full",children:[(0,r.jsxs)("div",{ref:E,className:"relative h-full overflow-y-auto ".concat(h),children:[L,(0,r.jsx)("div",{ref:R,className:"".concat(v),children:d.map((e,t)=>{if(e.isAnswer){var n,s;let l=e.id===(null===(n=d[d.length-1])||void 0===n?void 0:n.id);return(0,r.jsx)(A,{item:e,question:null===(s=d[t-1])||void 0===s?void 0:s.content,index:t,config:i,answerIcon:C,responding:l&&c,allToolIcons:N},e.id)}return(0,r.jsx)(m,{item:e,showPromptLog:y,questionIcon:w,isResponding:c},e.id)})})]}),(0,r.jsx)("div",{className:"absolute bottom-0 ".concat((B||!x||!u)&&f),ref:D,style:{background:"linear-gradient(0deg, #F9FAFB 40%, rgba(255, 255, 255, 0.00) 100%)"},children:(0,r.jsxs)("div",{ref:V,className:"".concat(j),children:[!u&&c&&(0,r.jsx)("div",{className:"flex justify-center mb-2",children:(0,r.jsxs)(q.Z,{className:"py-0 px-3 h-7 bg-white shadow-xs",onClick:p,children:[(0,r.jsx)(T.Pt,{className:"mr-[5px] w-3.5 h-3.5 text-gray-500"}),(0,r.jsx)("span",{className:"text-xs text-gray-500 font-normal",children:I("appDebug.operation.stopResponding")})]})}),B&&(0,r.jsx)(U,{suggestedQuestions:b,onSend:o}),!x&&(0,r.jsx)(S.Z,{visionConfig:null==i?void 0:null===(n=i.file_upload)||void 0===n?void 0:n.image,speechToTextConfig:null==i?void 0:i.speech_to_text,onSend:o})]})})]})})})},91890:function(e,t,n){n.d(t,{I:function(){return r.IY}});var r=n(29580)},90520:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(57437),s=n(9805),l=n(86236),a=n(2265),i=n(20251),o=a.memo(e=>{let{type:t,title:n,content:s,confirmText:l,cancelText:a,onConfirm:o,onCancel:d}=e,{t:c}=(0,i.$G)();return(0,r.jsxs)("div",{className:"w-[420px] max-w-full rounded-lg p-7 bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center",children:["info"===t&&(0,r.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M17.3333 21.3333H16V16H14.6667M16 10.6667H16.0133M28 16C28 17.5759 27.6896 19.1363 27.0866 20.5922C26.4835 22.0481 25.5996 23.371 24.4853 24.4853C23.371 25.5996 22.0481 26.4835 20.5922 27.0866C19.1363 27.6896 17.5759 28 16 28C14.4241 28 12.8637 27.6896 11.4078 27.0866C9.95189 26.4835 8.62902 25.5996 7.51472 24.4853C6.40042 23.371 5.5165 22.0481 4.91345 20.5922C4.31039 19.1363 4 17.5759 4 16C4 12.8174 5.26428 9.76516 7.51472 7.51472C9.76516 5.26428 12.8174 4 16 4C19.1826 4 22.2348 5.26428 24.4853 7.51472C26.7357 9.76516 28 12.8174 28 16Z",stroke:"#9CA3AF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"warning"===t&&(0,r.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M16 10.6667V16M16 21.3333H16.0133M28 16C28 17.5759 27.6896 19.1363 27.0866 20.5922C26.4835 22.0481 25.5996 23.371 24.4853 24.4853C23.371 25.5996 22.0481 26.4835 20.5922 27.0866C19.1363 27.6896 17.5759 28 16 28C14.4241 28 12.8637 27.6896 11.4078 27.0866C9.95189 26.4835 8.62902 25.5996 7.51472 24.4853C6.40042 23.371 5.5165 22.0481 4.91345 20.5922C4.31039 19.1363 4 17.5759 4 16C4 12.8174 5.26428 9.76516 7.51472 7.51472C9.76516 5.26428 12.8174 4 16 4C19.1826 4 22.2348 5.26428 24.4853 7.51472C26.7357 9.76516 28 12.8174 28 16Z",stroke:"#FACA15",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.jsx)("div",{className:"ml-4 text-lg text-gray-900",children:n})]}),(0,r.jsx)("div",{className:"mt-1 ml-12",children:(0,r.jsx)("div",{className:"text-sm leading-normal text-gray-500",children:s})}),(0,r.jsxs)("div",{className:"flex gap-3 mt-4 ml-12",children:[(0,r.jsx)("div",{onClick:o,className:"w-20 leading-9 text-center text-white border rounded-lg cursor-pointer h-9 border-color-primary-700 bg-primary-700",children:l||c("common.operation.confirm")}),(0,r.jsx)("div",{onClick:d,className:"w-20 leading-9 text-center text-gray-500 border rounded-lg cursor-pointer h-9 border-color-gray-200",children:a||c("common.operation.cancel")})]})]})});function d(e){let{isShow:t,onClose:n,type:d="warning",title:c,content:u,confirmText:m,cancelText:p,onConfirm:x,onCancel:g}=e,{t:h}=(0,i.$G)(),v=m||"".concat(h("common.operation.confirm")),f=p||"".concat(h("common.operation.cancel"));return(0,r.jsx)(s.u,{appear:!0,show:t,as:a.Fragment,children:(0,r.jsxs)(l.V,{as:"div",className:"relative z-[100]",onClose:n,onClick:e=>e.preventDefault(),children:[(0,r.jsx)(s.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,r.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-full p-4 text-center",children:(0,r.jsx)(s.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,r.jsx)(l.V.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white text-left align-middle shadow-xl transition-all",children:(0,r.jsx)(o,{type:d,title:c,content:u,confirmText:v,cancelText:f,onConfirm:x,onCancel:g})})})})})]})})}},39032:function(e,t,n){n.d(t,{_:function(){return o},q:function(){return u}});var r=n(57437),s=n(2265),l=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"11","height":"10","viewBox":"0 0 11 10","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"id":"star-04"},"children":[{"type":"element","name":"path","attributes":{"id":"Solid","d":"M5.88897 0.683596C5.82708 0.522683 5.67249 0.416504 5.50008 0.416504C5.32768 0.416504 5.17308 0.522683 5.11119 0.683596L4.27287 2.86321C4.1477 3.18865 4.10837 3.28243 4.05457 3.35809C4.00059 3.43401 3.93426 3.50034 3.85834 3.55433C3.78267 3.60813 3.68889 3.64746 3.36346 3.77263L1.18384 4.61094C1.02293 4.67283 0.916748 4.82743 0.916748 4.99984C0.916748 5.17224 1.02293 5.32684 1.18384 5.38873L3.36346 6.22705C3.68889 6.35221 3.78267 6.39155 3.85834 6.44535C3.93426 6.49933 4.00059 6.56566 4.05457 6.64158C4.10837 6.71724 4.1477 6.81102 4.27287 7.13646L5.11119 9.31608C5.17308 9.47699 5.32768 9.58317 5.50008 9.58317C5.67249 9.58317 5.82709 9.47699 5.88898 9.31608L6.72729 7.13646C6.85246 6.81102 6.89179 6.71724 6.94559 6.64158C6.99957 6.56566 7.06591 6.49933 7.14183 6.44535C7.21749 6.39155 7.31127 6.35221 7.6367 6.22705L9.81632 5.38873C9.97723 5.32684 10.0834 5.17224 10.0834 4.99984C10.0834 4.82743 9.97723 4.67283 9.81632 4.61094L7.6367 3.77263C7.31127 3.64746 7.21749 3.60813 7.14183 3.55433C7.06591 3.50034 6.99957 3.43401 6.94559 3.35809C6.89179 3.28243 6.85246 3.18865 6.72729 2.86321L5.88897 0.683596Z","fill":"currentColor"},"children":[]}]}]},"name":"Star04"}'),a=n(24322);let i=s.forwardRef((e,t)=>(0,r.jsx)(a.Z,{...e,ref:t,data:l}));i.displayName="Star04";var o=i,d=JSON.parse('{"icon":{"type":"element","isRootNode":true,"name":"svg","attributes":{"width":"16","height":"16","viewBox":"0 0 16 16","fill":"none","xmlns":"http://www.w3.org/2000/svg"},"children":[{"type":"element","name":"g","attributes":{"id":"star-06"},"children":[{"type":"element","name":"g","attributes":{"id":"Solid"},"children":[{"type":"element","name":"path","attributes":{"d":"M3.66675 1.33268C3.66675 0.964492 3.36827 0.666016 3.00008 0.666016C2.63189 0.666016 2.33341 0.964492 2.33341 1.33268V2.33268H1.33341C0.965225 2.33268 0.666748 2.63116 0.666748 2.99935C0.666748 3.36754 0.965225 3.66602 1.33341 3.66602H2.33341V4.66602C2.33341 5.0342 2.63189 5.33268 3.00008 5.33268C3.36827 5.33268 3.66675 5.0342 3.66675 4.66602V3.66602H4.66675C5.03494 3.66602 5.33341 3.36754 5.33341 2.99935C5.33341 2.63116 5.03494 2.33268 4.66675 2.33268H3.66675V1.33268Z","fill":"currentColor"},"children":[]},{"type":"element","name":"path","attributes":{"d":"M3.66675 11.3327C3.66675 10.9645 3.36827 10.666 3.00008 10.666C2.63189 10.666 2.33341 10.9645 2.33341 11.3327V12.3327H1.33341C0.965225 12.3327 0.666748 12.6312 0.666748 12.9993C0.666748 13.3675 0.965225 13.666 1.33341 13.666H2.33341V14.666C2.33341 15.0342 2.63189 15.3327 3.00008 15.3327C3.36827 15.3327 3.66675 15.0342 3.66675 14.666V13.666H4.66675C5.03494 13.666 5.33341 13.3675 5.33341 12.9993C5.33341 12.6312 5.03494 12.3327 4.66675 12.3327H3.66675V11.3327Z","fill":"currentColor"},"children":[]},{"type":"element","name":"path","attributes":{"d":"M9.28898 1.76003C9.18995 1.50257 8.94259 1.33268 8.66675 1.33268C8.3909 1.33268 8.14354 1.50257 8.04452 1.76003L6.8884 4.76594C6.68813 5.28663 6.6252 5.43668 6.53912 5.55774C6.45274 5.67921 6.34661 5.78534 6.22514 5.87172C6.10408 5.9578 5.95403 6.02073 5.43334 6.221L2.42743 7.37712C2.16997 7.47614 2.00008 7.7235 2.00008 7.99935C2.00008 8.2752 2.16997 8.52256 2.42743 8.62158L5.43334 9.7777C5.95403 9.97797 6.10408 10.0409 6.22514 10.127C6.34661 10.2134 6.45274 10.3195 6.53912 10.441C6.6252 10.562 6.68813 10.7121 6.8884 11.2328L8.04452 14.2387C8.14354 14.4961 8.3909 14.666 8.66675 14.666C8.9426 14.666 9.18995 14.4961 9.28898 14.2387L10.4451 11.2328C10.6454 10.7121 10.7083 10.562 10.7944 10.441C10.8808 10.3195 10.9869 10.2134 11.1084 10.127C11.2294 10.0409 11.3795 9.97797 11.9002 9.7777L14.9061 8.62158C15.1635 8.52256 15.3334 8.2752 15.3334 7.99935C15.3334 7.7235 15.1635 7.47614 14.9061 7.37712L11.9002 6.221C11.3795 6.02073 11.2294 5.9578 11.1084 5.87172C10.9869 5.78534 10.8808 5.67921 10.7944 5.55774C10.7083 5.43668 10.6454 5.28663 10.4451 4.76594L9.28898 1.76003Z","fill":"currentColor"},"children":[]}]}]}]},"name":"Star06"}');let c=s.forwardRef((e,t)=>(0,r.jsx)(a.Z,{...e,ref:t,data:d}));c.displayName="Star06";var u=c},75436:function(e,t,n){var r=n(57437),s=n(2265),l=n(20251),a=n(49480),i=n(18396),o=n(60103),d=n(25085),c=n(60488),u=n(60237),m=n(46286),p=n(29580);let x=e=>{let{onUpload:t,disabled:n}=e,{t:a}=(0,l.$G)(),[o,d]=(0,s.useState)(!1);return(0,r.jsxs)(m.KR,{open:o,onOpenChange:d,placement:"top-start",children:[(0,r.jsx)(m.xE,{onClick:()=>{n||d(e=>!e)},children:(0,r.jsxs)("div",{className:"\n          relative flex items-center justify-center px-3 h-8 bg-gray-100 hover:bg-gray-200 text-xs text-gray-500 rounded-lg\n          ".concat(n?"cursor-not-allowed":"cursor-pointer","\n        "),children:[(0,r.jsx)(u.vQ,{className:"mr-2 w-4 h-4"}),a("common.imageUploader.pasteImageLink")]})}),(0,r.jsx)(m.BD,{className:"z-10",children:(0,r.jsx)("div",{className:"p-2 w-[320px] bg-white border-[0.5px] border-gray-200 rounded-lg shadow-lg",children:(0,r.jsx)(i.Z,{onUpload:e=>{d(!1),t(e)}})})})]})};t.Z=e=>{let{settings:t,onFilesChange:n}=e,{t:i}=(0,l.$G)(),{files:u,onUpload:m,onRemove:g,onImageLinkLoadError:h,onImageLinkLoadSuccess:v,onReUpload:f}=(0,d.Vo)();(0,s.useEffect)(()=>{n(u)},[u]);let j=(0,r.jsx)(a.Z,{onUpload:m,disabled:u.length>=t.number_limits,limit:+t.image_file_size_limit,children:e=>(0,r.jsxs)("div",{className:"\n            flex items-center justify-center px-3 h-8 bg-gray-100\n            text-xs text-gray-500 rounded-lg cursor-pointer\n            ".concat(e&&"bg-gray-200","\n          "),children:[(0,r.jsx)(c.c,{className:"mr-2 w-4 h-4"}),i("common.imageUploader.uploadFromComputer")]})}),b=(0,r.jsx)(x,{onUpload:m,disabled:u.length>=t.number_limits});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-1",children:(0,r.jsx)(o.Z,{list:u,onRemove:g,onReUpload:f,onImageLinkLoadError:h,onImageLinkLoadSuccess:v})}),(0,r.jsx)("div",{className:"grid gap-1 ".concat(2===t.transfer_methods.length?"grid-cols-2":"grid-cols-1"),children:t.transfer_methods.map(e=>e===p.IY.local_file?(0,r.jsx)(s.Fragment,{children:j},p.IY.local_file):e===p.IY.remote_url?(0,r.jsx)(s.Fragment,{children:b},p.IY.remote_url):null)})]})}}}]);